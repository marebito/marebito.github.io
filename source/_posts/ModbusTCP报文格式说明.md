---
title: ModbusTCP报文格式说明
date: 2020-09-03 10:20:07
tags: ModbusTCP
---

modbus tcp数据报文结构

请求：00 00 00 00 00 06 09 03 00 00 00 01

响应：00 00 00 00 00 05 09 03 02 12 34



　　一次modbus tcp读取保持寄存器的通信分析(省略了ip/tcp头)：从左向右分析该数据报文：

请求：

00 00为此次通信事务处理标识符，一般每次通信之后将被要求加1以区别不同的通信数据报文;

00 00表示协议标识符，00 00为modbus协议;

00 06为数据长度，用来指示接下来数据的长度，单位字节;

09为设备地址，用以标识连接在串行线或者网络上的远程服务端的地址。以上七个字节也被称为modbus报文头；

03为功能码，此时代码03为读取保持寄存器数据；

00 00为起始地址；

00 01为寄存器数量，（word数量）。

响应：

00 00为此次通信事务处理标识符，应答报文要求与先前对应的请求保持一致;

00 00为协议标识符，与先前对应的请求保持一致;

00 05为数据长度，用来指示接下来数据的长度，单位字节;

09为设备地址，应答报文要求与先前对应的请求保持一致；

03为功能码，正常情况下应答报文要求与先前对应的请求保持一致，如果出错则返回80h+先前的功能码；

02指示接下来数据的字节长度;

12 34为被读取的保持寄存器中的数据值，即要求被读取的地址为00 00的保持寄存器中的数值为1234h。



参考资料：https://www.cnblogs.com/ioufev/articles/10830028.html